# Система обновлений и уведомлений

## Что было добавлено:

### 1. Страница Download (`/download.html`)
- **Для SEO:** Страница оптимизирована под запросы "are you dead app download" и "are you dead app apk"
- **Объясняет PWA:** Пользователям объясняется, что APK не нужен - это Progressive Web App
- **Инструкции по установке:** Для Android, iOS и Desktop
- **Добавлена в sitemap.xml** для индексации Google

### 2. Проверка обновлений (`version.json` + `app.js`)
- **Файл версии:** `public/version.json` содержит текущую версию приложения
- **Автоматическая проверка:** При загрузке приложения проверяется наличие обновлений
- **Уведомления:** Если есть обновление, показывается toast-уведомление
- **Логирование:** Версия проверяется и логируется в админ-почту

### 3. Система уведомлений пользователей
- **Email-уведомления:** Через существующий Cloudflare Worker (бесплатно)
- **Функция `notifyUserViaEmail()`:** Отправляет email пользователям о новых функциях/обновлениях
- **Тип `user_notification`:** Добавлен в worker для отправки уведомлений

## Как использовать:

### Обновить версию приложения:
1. Отредактируй `public/version.json`:
```json
{
  "version": "1.0.1",
  "build": "20241202",
  "updateAvailable": true,
  "updateMessage": "Новые функции: синхронизация между устройствами!",
  "updateUrl": "/"
}
```

2. Обнови `APP_VERSION` в `public/app.js`:
```javascript
const APP_VERSION = '1.0.1';
```

3. При следующей загрузке пользователи увидят уведомление об обновлении

### Отправить уведомление пользователям:
В консоли браузера или в коде:
```javascript
notifyUserViaEmail(
  "Новая функция доступна!",
  "Теперь доступна синхронизация между устройствами. Обновите приложение!"
);
```

### Обновить worker:
Скопируй обновленный код из `worker-code.js` в Cloudflare Dashboard:
- Workers & Pages → rudead → Edit code
- Вставь новый код
- Сохрани и задеплой

## Стоимость:
- ✅ **Бесплатно:** Все работает через существующий Cloudflare Worker и Resend API
- ✅ **Resend:** Бесплатный план включает 100 emails/день (достаточно для начала)
- ✅ **Cloudflare Workers:** Бесплатный план включает 100,000 запросов/день

## SEO оптимизация:
- Страница `/download` оптимизирована под запросы:
  - "are you dead app download"
  - "are you dead app apk"
  - "download are you dead app"
- Добавлена в `sitemap.xml`
- Мета-теги для социальных сетей

## Что дальше:
1. **Мониторинг:** Следи за запросами в Google Search Console
2. **Обновления:** Когда добавляешь новые функции, обновляй `version.json`
3. **Уведомления:** Используй `notifyUserViaEmail()` для важных объявлений
4. **Аналитика:** Версии логируются в админ-почту для отслеживания использования

